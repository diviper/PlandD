# PlanD - Умный планировщик задач с AI 

## Описание проекта
PlanD - это Telegram бот-планировщик задач, использующий искусственный интеллект для анализа и организации задач. Бот умеет понимать естественный язык, автоматически определять приоритеты и сроки, а также отправлять умные напоминания.

## Основные возможности
- Анализ задач с помощью OpenAI GPT
- Автоматическое определение сроков и приоритетов
- Умная система напоминаний
- Управление подзадачами
- Настраиваемые уведомления

## Структура проекта

```
PlandD/
├── src/                      # Основной код проекта
│   ├── bot/                  # Модули Telegram бота
│   ├── core/                 # Базовая конфигурация
│   ├── database/             # Работа с базой данных
│   └── services/             # Сервисы (AI, планировщик)
├── migrations/               # Миграции базы данных
├── tests/                    # Тестовые файлы
└── logs/                     # Логи приложения
```

### Ключевые компоненты

#### 1. Telegram Bot (`src/bot/`)
- `bot.py` - Основная логика бота
- `handlers/` - Обработчики команд и сообщений
- `__main__.py` - Точка входа для запуска бота

#### 2. AI Сервисы (`src/services/ai/`)
- `analyzer.py` - Анализ задач через OpenAI
- `planner.py` - Планирование и организация задач

#### 3. База данных (`src/database/`)
- SQLite для хранения задач и настроек
- Миграции через Alembic

## Файлы проекта

### Основные файлы
- `setup.py` - Конфигурация Python пакета и зависимостей
- `requirements.txt` - Список зависимостей для pip
- `init_database.py` - Скрипт инициализации базы данных
- `alembic.ini` - Конфигурация миграций базы данных

### Тестовые файлы
- `test_bot.py` - Проверка подключения к Telegram API
- `test_openai.py` - Тестирование интеграции с OpenAI
- `test_env.py` - Проверка переменных окружения

### Автоматически создаваемые файлы
- `tasks.db` - База данных SQLite (создается автоматически)
- `pland.egg-info/` - Метаданные Python пакета (создается автоматически)

### Директории
- `migrations/` - Миграции базы данных (Alembic)
  - `versions/` - Версии миграций
  - `env.py` - Окружение для миграций

## Тестовые файлы
- `test_bot.py` - Проверка подключения к Telegram API
- `test_openai.py` - Тестирование интеграции с OpenAI
- `test_env.py` - Проверка переменных окружения

## Настройка и запуск

### 1. Установка зависимостей
```bash
python -m pip install -r requirements.txt
```

### 2. Настройка окружения
Создайте файл `.env` со следующими параметрами:
```env
BOT_TOKEN=ваш_токен_бота
OPENAI_API_KEY=ваш_ключ_openai
LOG_LEVEL=DEBUG
DATABASE_PATH=tasks.db
```

### 3. Инициализация базы данных
```bash
python init_database.py
```

### 4. Запуск бота
```bash
python -m src.bot.__main__
```

## Тестирование компонентов

### Проверка бота
```bash
python test_bot.py
```
Проверяет подключение к Telegram API и базовую информацию о боте.

### Проверка OpenAI
```bash
python test_openai.py
```
Тестирует интеграцию с OpenAI и анализ задач.

## Логирование
- Все логи сохраняются в директории `logs/`
- Уровень логирования настраивается через `LOG_LEVEL` в `.env`

## Мониторинг и обслуживание
- Проверяйте файл `tasks.db` для мониторинга задач
- Логи в `logs/` для отслеживания ошибок
- Используйте `alembic` для управления миграциями базы данных

## Известные проблемы и решения
1. Если бот не отвечает:
   - Проверьте подключение через `test_bot.py`
   - Проверьте логи на наличие ошибок
2. Проблемы с OpenAI:
   - Запустите `test_openai.py`
   - Проверьте валидность API ключа

## Дальнейшее развитие
- [ ] Добавить поддержку групповых задач
- [ ] Интеграция с календарями
- [ ] Расширенная аналитика задач
- [ ] Улучшенные алгоритмы напоминаний

## Безопасность
- Все токены хранятся в `.env`
- Используется SQLite с базовым шифрованием
- Логи не содержат чувствительной информации