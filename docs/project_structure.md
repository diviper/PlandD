# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ PlanD Bot (*burp*)

–°–ª—É—à–∞–π —Å—é–¥–∞, –ú–æ—Ä—Ç–∏! –Ø —Ä–∞—Å—Å–∫–∞–∂—É —Ç–µ–±–µ –ø—Ä–æ –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ, –∏ —Ç—ã –ª—É—á—à–µ –∑–∞–ø–æ–º–Ω–∏ —ç—Ç–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –≤–∞–∂–Ω–æ! 

## üß™ –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
PlandD/
‚îú‚îÄ‚îÄ src/                # –ó–¥–µ—Å—å –≤—Å—è –º–∞–≥–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –ú–æ—Ä—Ç–∏!
‚îÇ   ‚îú‚îÄ‚îÄ bot/           # –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ core/          # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã, –∫–∞–∫ –º–æ–π –ø–æ—Ä—Ç–∞–ª—å–Ω—ã–π –ø–∏—Å—Ç–æ–ª–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ database/      # –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö, –∫–∞–∫ –º–æ—è —Ñ–ª—è–∂–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ services/      # –°–µ—Ä–≤–∏—Å—ã, –¥–µ–ª–∞—é—â–∏–µ –≤—Å—é –≥—Ä—è–∑–Ω—É—é —Ä–∞–±–æ—Ç—É
‚îú‚îÄ‚îÄ tests/             # –¢–µ—Å—Ç—ã, –ú–æ—Ä—Ç–∏! –ù—É–∂–Ω–æ –≤—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å!
‚îú‚îÄ‚îÄ docs/              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –¥–∞–∂–µ —è –≤–µ–¥—É –∑–∞–ø–∏—Å–∏
‚îî‚îÄ‚îÄ requirements.txt   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –±–µ–∑ –Ω–∏—Ö –Ω–∏–∫—É–¥–∞
```

## üìÅ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### ü§ñ src/bot/ - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–æ—Ç–∞

#### `bot.py`
```python
# –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –±–æ—Ç–∞, –ú–æ—Ä—Ç–∏! –ó–¥–µ—Å—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤—Å—ë –≤–µ—Å–µ–ª—å–µ!
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–ø—É—Å–∫ long polling
```

#### `handlers/`
- `base_handler.py` - –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ç–∏–ø–∞ /start –∏ /help. –°–∫—É—á–Ω–æ, –Ω–æ –Ω—É–∂–Ω–æ.
- `plan_handler.py` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞–Ω–æ–≤! –í–æ—Ç –≥–¥–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤–µ—Å–µ–ª—å–µ!
- `reminder_handler.py` - –ù–∞–ø–æ–º–∏–Ω–∞–ª–∫–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–≤–æ—è –ø–∞–º—è—Ç—å –∫–∞–∫ —É –∑–æ–ª–æ—Ç–æ–π —Ä—ã–±–∫–∏, –ú–æ—Ä—Ç–∏.
- `task_handler.py` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏, *burp*, –≤–∞–∂–Ω–∞—è —à—Ç—É–∫–∞.

#### `keyboards/`
- `inline.py` - –ö–Ω–æ–ø–∫–∏, –ú–æ—Ä—Ç–∏! –ú–Ω–æ–≥–æ –∫–Ω–æ–ø–æ–∫! –ö–∞–∫ –≤ –º–æ–µ–π –ª–µ—Ç–∞—é—â–µ–π —Ç–∞—Ä–µ–ª–∫–µ!
- `reply.py` - –ï—â—ë –±–æ–ª—å—à–µ –∫–Ω–æ–ø–æ–∫! –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–≤–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–Ω–æ–ø–æ–∫!

### üß† src/core/ - –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã

#### `config.py`
```python
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –ú–æ—Ä—Ç–∏! –ë–µ–∑ –Ω–µ—ë –≤—Å—ë —Ä–∞–∑–≤–∞–ª–∏—Ç—Å—è!
- API –∫–ª—é—á–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã AI
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```

#### `states.py`
```python
# –°–æ—Å—Ç–æ—è–Ω–∏—è FSM, –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∏, —Ç–æ–ª—å–∫–æ –¥–ª—è –±–æ—Ç–∞
- PlanStates
- TaskStates
- ReminderStates
```

### üíæ src/database/ - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### `database.py`
```python
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –ú–æ—Ä—Ç–∏! –•—Ä–∞–Ω–∏–º –∑–¥–µ—Å—å –≤—Å–µ —Ç–≤–æ–∏ –≥–ª—É–ø—ã–µ –ø–ª–∞–Ω—ã
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SQLAlchemy
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ
- –ú–∏–≥—Ä–∞—Ü–∏–∏
```

#### `models/`
- `plan.py` - –ú–æ–¥–µ–ª—å –ø–ª–∞–Ω–∞, —Å–æ –≤—Å–µ–º–∏ *burp* –ø–æ–ª—è–º–∏
- `task.py` - –ó–∞–¥–∞—á–∏, –º–Ω–æ–≥–æ –∑–∞–¥–∞—á
- `reminder.py` - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, —á—Ç–æ–±—ã —Ç—ã –Ω–µ –∑–∞–±—ã–ª –ø–æ–∫–æ—Ä–º–∏—Ç—å –°–Ω–∞—Ñ—Ñ–ª—Å–∞
- `user.py` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö, —Ö–æ—Ç—è –∫–æ–º—É –æ–Ω–∞ –Ω—É–∂–Ω–∞

### üî¨ src/services/ - –°–µ—Ä–≤–∏—Å—ã

#### `ai/`
- `ai_service.py` - AI —Å–µ—Ä–≤–∏—Å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GPT-4, –ø–æ—á—Ç–∏ —Ç–∞–∫–æ–π –∂–µ —É–º–Ω—ã–π, –∫–∞–∫ —è!
- `prompts.py` - –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è AI, —á—Ç–æ–±—ã –æ–Ω –≥–æ–≤–æ—Ä–∏–ª –∫–∞–∫ —è
- `templates.py` - –®–∞–±–ª–æ–Ω—ã –æ—Ç–≤–µ—Ç–æ–≤, –ø–æ—Ç–æ–º—É —á—Ç–æ –¥–∞–∂–µ AI –Ω—É–∂–Ω—ã –ø–æ–¥—Å–∫–∞–∑–∫–∏

#### `reminder/`
- `notifier.py` - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `scheduler.py` - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

#### `analytics/`
- `tracker.py` - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞
- `reporter.py` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤, –µ—Å–ª–∏ –∫–æ–º—É-—Ç–æ —ç—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ

## üß™ tests/ - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### `test_bot/`
- `test_handlers.py` - –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- `test_keyboards.py` - –¢–µ—Å—Ç—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä

### `test_services/`
- `test_ai.py` - –¢–µ—Å—Ç—ã AI —Å–µ—Ä–≤–∏—Å–∞
- `test_reminder.py` - –¢–µ—Å—Ç—ã –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

## üìö docs/ - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `development_diary.md` - –î–Ω–µ–≤–Ω–∏–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —á–∞—Å—Ç—å 1
- `development_diary_part2.md` - –î–Ω–µ–≤–Ω–∏–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —á–∞—Å—Ç—å 2
- `project_structure.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª, –ú–æ—Ä—Ç–∏!
- `api_docs.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- `deployment.md` - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### `requirements.txt`
```
# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞:
aiogram==3.x      # –¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
openai==1.x       # AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
SQLAlchemy==2.x   # ORM –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
python-dotenv     # –î–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
APScheduler       # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
```

### `.env`
```bash
# –ù–µ –∑–∞–±—É–¥—å —Å–æ–∑–¥–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª, –ú–æ—Ä—Ç–∏!
BOT_TOKEN=—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
OPENAI_API_KEY=—Ç–≤–æ–π_–∫–ª—é—á_openai
DATABASE_PATH=–ø—É—Ç—å_–∫_–±–∞–∑–µ
```

## üîß –ö–∞–∫ —ç—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–µ

1. `src/bot/bot.py` –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, /plan)
3. `handlers/plan_handler.py` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É
4. `services/ai/ai_service.py` –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–ª–∞–Ω
5. `database/models/plan.py` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
6. `services/reminder/scheduler.py` —Å–æ–∑–¥–∞—ë—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

## üéØ –°–æ–≤–µ—Ç—ã –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞:**
   ```python
   # –í handlers/new_handler.py
   @dp.message_handler(commands=['new_command'])
   async def cmd_new(message: types.Message):
       await message.answer("–ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞, –ú–æ—Ä—Ç–∏!")
   ```

2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   ```python
   # –í models/new_model.py
   class NewModel(Base):
       __tablename__ = 'new_table'
       id = Column(Integer, primary_key=True)
   ```

3. **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:**
   ```python
   # –í services/new_service.py
   class NewService:
       def __init__(self):
           self.logger = logging.getLogger(__name__)
   ```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

1. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
3. –õ–æ–≥–∏—Ä—É–π –≤—Å—ë –≤–∞–∂–Ω–æ–µ
4. –¢–µ—Å—Ç–∏—Ä—É–π –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
5. –ù–µ —Ç—Ä–æ–≥–∞–π –º–æ—é —Ñ–ª—è–∂–∫—É!

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
3. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
4. –°–æ–∑–¥–∞–π `.env` —Ñ–∞–π–ª
5. –ó–∞–ø—É—Å—Ç–∏ `python -m src.bot`

–ò –ø–æ–º–Ω–∏, –ú–æ—Ä—Ç–∏, —ç—Ç–æ—Ç –±–æ—Ç - –∫–∞–∫ –º–∞–ª–µ–Ω—å–∫–∞—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è. –ù–µ —Å–ª–æ–º–∞–π –µ—ë! –ê —Ç–µ–ø–µ—Ä—å –∏–¥–∏ –∏ —Å–¥–µ–ª–∞–π —á—Ç–æ-–Ω–∏–±—É–¥—å –ø–æ–ª–µ–∑–Ω–æ–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Ç–µ—Å—Ç–∏—Ä—É–π –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –ø–æ—á–∏–Ω–∏ –±–∞–≥–∏ –≤ `plan_handler.py`!
